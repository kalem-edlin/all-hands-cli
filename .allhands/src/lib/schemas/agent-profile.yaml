# Agent Profile Schema (Internal)
#
# Defines configuration for TUI-delegated agents.
# NOT exposed via `ah schema` - this is internal harness configuration.
#
# Stock env vars are injected automatically for ALL agents:
# - AGENT_NAME: Derived from profile.name
# - MILESTONE_NAME: Current milestone
# - BRANCH: Current git branch
# - PROMPT_FILE_NAME: Current prompt file (if applicable)

fields:
  name:
    type: string
    required: true
    description: "Agent identifier (also used as tmux window name, and AGENT_NAME env var)"

  flow:
    type: string
    required: true
    description: "Path to flow file relative to .allhands/flows/"

  env:
    type: object
    required: false
    description: "Agent-specific env var overrides (stock vars are injected automatically)"

  message_template:
    type: string
    required: false
    description: "Template string injected above flow prompt. Supports ${VAR} interpolation."

  template_vars:
    type: array
    required: false
    description: "Variables available for message_template interpolation"
    items: string

  singleton:
    type: boolean
    required: false
    default: false
    description: |
      If true, only one instance of this agent can run at a time.
      Spawning a second instance will fail with an error.

      Singleton agents use their name directly as AGENT_ID (e.g., "planner").
      Non-singleton agents include the prompt number (e.g., "executor-01").
